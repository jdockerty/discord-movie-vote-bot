image: python:latest

stages:
  - test
  - deploy

test:
  stage: test
  script:
    - apt-get update -qy
    - pip install awscli
    - pip install -r requirements.txt
    - export bot_environment=ci-tests
    - python bot_test.py -c $CHANNEL_ID $TARGET_BOT_ID $TESTER_BOT_TOKEN --run all

# production:
#   stage: deploy
#   script:
#     - apt-get update -qy
#     - apt-get install -y ruby-dev
#     - gem install dpl
#     - dpl --provider=heroku --app=gitlab-ci-python-test-staging --api-key=$HEROKU_STAGING_API_KEY
#   only:
#     - master